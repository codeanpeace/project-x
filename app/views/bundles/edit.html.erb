

#hey ykat, haven't "hooked in" any of your stylesheets and whatnot - can't do it in the header since the applications.html.erb in the layouts folder under views has the header section (at least that was my impression)
#the bare structure of the edit aka bundling page for both brand new bundles and editing existing bones is here - both the "bundling board" where resources that are in an existing bundle and to be bundled go and the search results for the relevant topic
#still need to ajax it up

<% if current_user && current_user.bundles.empty? || !current_user %>
  <p> Create your very first bundle! </p>
<% end %>

#!rewrite above as a flash alert/message/modal


<div id="bundle_stage">
  <form>
    Bundle Name: <input type="text" name="bundlename">
    Bundle Description: <input type="text" name="bundlescription">

  </form>


    #!ajaxify this so the default appears static and is clickable/editable div that on click, returns these forms


#bundle stage for either already bundled or to be bundled

  <div id="makeMeScrollable">
    <div id="to_be_bundled_text">Resources To Be Bundled</div>
    <% @bundle.resources.each do |resource| %>
      <div class="bundle_stage_resource" id='<%= "resource_#{resource.id}" %>'>
        <div class="resource_title"><a href=<%= resource.url %>><%= resource.name %></a></div>
        <img src="/images/<%= resource.kind %>.svg" alt>
        <button class="remove_from_bundle">Remove From Bundle</button>

      </div>
    <% end %>
  </div>
  <button id="bundle_me" class="call-modal" onClick="location.href='#modal-text';">Click to Bundle</button>

</div>

<% if params[:id] != nil %>
<!-- #all standards associated with this bundle upon first search so that when user returns to page to edit bundle, they can add resources based upon these initial associated standards -->
  <% @bundle.standards.each do |standard| %>
    <h3> <%= standard.standard %> </h3>
    <div class="resource_tiles" id="container">
      <ul id="resource_tiles_list">
        <% standard.resources.each do |resource| %>
          <% if !@bundle.resources.include?(resource) %>
            <li class="resource <%= resource.kind %>" id="<%= resource.id %>">
              <div class="resource_title"><a href="<%= resource.url %>">
                <%= resource.name %> </a> <%= resource.source %> </div>
              <img src="/images/<%= resource.kind %>.svg" alt>

              <!-- refactor this to actually submit to the bundles#update action,
              so that the resource can be added to the bundle -->

              <button class="add_to_bundle">add to bundle</button>
              <%= form_tag update_bundle_url(@bundle) do %>
                <%= hidden_field_tag :resource, resource.id %>
                <%= submit_tag "Add Resource To Bundle" %>
              <% end %>

<!--               not sure if we should have this if we don't have favorites
 -->            <button class="add_to_favorite">add to favorites</button>

  #!add ajax to create bundle
</div>

#resource search results relevant to this bundle
<div class="resource_tiles" id="container">
  <% @standard_list.standards.each do |standard| %>
    <div class="standard_section" id = '<%= "standard_section_#{standard.id}" %>'>
      <%= standard.standard %>
      <ul class="resource_tiles_list">
        <% standard.resources.each do |resource| %>
          <% if !@bundle.resources.include?(resource) %>
            <li class='<%= "resource #{resource.kind}" %>' id='<%= "resource_#{resource.id}" %>'>
              <a href="<%= resource.url %>">
                <div class="resource_name"><%= resource.name %> <%= resource.source %></div>
              </a>
              <img src="/images/<%= resource.kind %>.svg" alt>
              <button class="add_to_bundle">add to bundle</button>
              <button class="add_to_favorite">add to favorites</button>
              #!ajaxify both bundle and favorite buttons

            </li>
          <% end %>
        <% end %>
      </ul>
    </div>
  <% end %>
</div>




- -- --
 <% else %>

<!-- if this is the first time searching, and they have not created a bundle, these standards/resources pop up:
 -->

<% @standard_list.each do |standard| %>
  <h3> <%= standard.standard %> </h3>
  <div class="resource_tiles" id="container">
    <ul id="resource_tiles_list">
      <% standard.resources.each do |resource| %>
        <li class="resource <%= resource.kind %>" id="<%= resource.id %>">

            <div class="resource_title"><a href="<%= resource.url %>"><%= resource.name %> </a> <%= resource.source %> </div>
            <img src="/images/<%= resource.kind %>.svg" alt>
            <button class="add_to_bundle">add to bundle</button>
            <button class="add_to_favorite">add to favorites</button>

        </li>
      <% end %>
    </ul>
  </div>
<% end %>


<% end %>


<!-- jQuery library - Please load it from Google API's -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.1/jquery.min.js" type="text/javascript"></script>

<script src="js/jquery.isotope.min.js" type="text/javascript"></script>

<script src="/js/modal.js"></script>

<!-- jQuery UI Widget and Effects Core (custom download)
     You can make your own at: http://jqueryui.com/download -->
<script src="/js/jquery-ui-1.8.23.custom.min.js" type="text/javascript"></script>

<!-- Latest version (3.0.6) of jQuery Mouse Wheel by Brandon Aaron
     You will find it here: http://brandonaaron.net/code/mousewheel/demos -->
<script src="/js/jquery.mousewheel.min.js" type="text/javascript"></script>

<!-- jQuery Kinectic (1.5) used for touch scrolling -->
<script src="/js/jquery.kinetic.js" type="text/javascript"></script>

<!-- Smooth Div Scroll 1.3 minified-->
<script src="/js/jquery.smoothdivscroll-1.3-min.js" type="text/javascript"></script>

<!-- If you want to look at the uncompressed version you find it at
     js/jquery.smoothDivScroll-1.3.js -->


<!-- Plugin initialization -->
<script type="text/javascript">
  // Initialize the plugin with no custom options
  $(document).ready(function () {
    // None of the options are set
    $("div#makeMeScrollable").smoothDivScroll({
      hotSpotScrolling: true,

    });
  });
</script>

<script type="text/javascript">
$(document).ready(function () {
  $container = $('#container');
  $('#container').isotope({
    // options
    itemSelector : '.resource',
    layoutMode : 'fitRows'
  });

  $container.delegate( '.add_to_bundle', 'click', function(){
          var rid = $(this).parent().attr("id")
          var chosenItem = $( '#'+rid);
          console.log(chosenItem);
          var tbb_container = $(".scrollableArea");
          var tbb_text = $('#to_be_bundled_text');
          var tbb_makemescrollable = $ ('#makeMeScrollable');
          console.log(tbb_container);
          $container.isotope( 'remove', chosenItem );

          // console.log($chosenItem);
          // $(chosenItem).appendTo(tbb_container);

          var newdiv = $('<div>').attr("id", rid).addClass('tbb_resource').text(chosenItem.children().first().text());
          tbb_text.empty();
          tbb_container.append(newdiv).attr("style", "width: 100%");


        });

    var clear_tbb_container = function(){
      var tbb_container = $(".scrollableArea");

      tbb_container.empty();










    };

     $("#bundle_me").on("click", clear_tbb_container);



});

</script>



<!-- for reference when ajaxifying add to favorites and bundle
<%= form_tag update_bundle_url(@bundle) do %>
  <%= hidden_field_tag :resource, resource.id %>
  <%= submit_tag "Add Resource To Bundle" %>
<% end %>
-->
